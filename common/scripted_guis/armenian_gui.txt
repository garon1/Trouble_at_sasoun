scripted_gui = {

	Armenian_state_window = {
		context_type = selected_state_context
		window_name = "ARM_Infopanel"
		parent_window_token = selected_state_view

		visible = {
			ROOT = {
				original_tag = ARM
			}
			is_owned_by = ARM
			is_core_of = ARM
		}

		effects = {
			### Martial Law
			ARM_Action_Declare_Martial_Law_button_click = {
				clr_state_flag = ARM_Can_Martial_Law
				add_resistance_target = {
					amount = -35
					occupier = ARM
					days = 250
					tooltip = "Increased Garrisons"
				}
				ROOT = {
					add_manpower = -150
					add_equipment_to_stockpile = {
						type = infantry_equipment_0
						amount = -100
						producer = ARM
					}
				}
				hidden_effect = {
					state_event = {
						id = ARMgui.2
						days = 250
						trigger_for = owner
					}
				}	
			}

			### Bribe Officials
			ARM_Action_Calm_Down_Local_Leaders_button_click = {
				ARM_decrease_revolt_risk = yes
				ROOT = {
					add_political_power = -20
				}
			}

			### Purge Disloyal Elements
			ARM_Action_Purge_Disloyal_Elements_button_click = {
				ARM_decrease_revolt_risk = yes
				ROOT = {
					add_command_power = -25
				}
			}

			### Local Recruits
			ARM_Action_Recruit_Local_Troops_button_click = {
				ROOT = {
					army_experience = -30
					if = {
						limit = {
							NOT = {
								has_country_flag = created_irregular_template
							}
						}
						set_country_flag = created_irregular_template
						division_template = {
							name = "ARMoman Irregulars"
							division_names_group = ARM_INF_01
							is_locked = yes
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
								infantry = { x = 1 y = 0 }
								infantry = { x = 1 y = 1 }
							}
						}
					}
					add_manpower = 5000
				}
				create_unit = {
					division = "name = \"ARMoman Irregulars\" division_template = \"ARMoman Irregulars\" start_experience_factor = 0.6 start_equipment_factor = 0.25"
					owner = ARM
				}
				set_state_flag = recruited_irregulars
			}

			### Loosen Tax Burden
			ARM_Loosen_Tax_Burden_button_click = {
				add_to_variable = {
					var = corruption
					value = 1
				}
				set_state_flag = ARM_corruption_applied
				add_state_modifier = {
					modifier = {
						local_building_slots_factor = -0.10
						local_manpower = -0.25
					}
				}

				# Decrease unrest level
				ARM_decrease_revolt_risk = yes

				# Add Conservative Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { con_sup_deputies = deputy_calculator }
						subtract_from_variable = { con_opp_deputies = deputy_calculator }
						clamp_variable = {
							var = con_opp_deputies
							min = 0
							max = con_deputies
						}
						clamp_variable = {
							var = con_sup_deputies
							min = 0
							max = con_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}
			}


			### Increase Tax Burden
			ARM_Increase_Tax_Burden_button_click = {
				# Increase revolt risk
				ARM_increase_revolt_risk = yes
				ARM_increase_revolt_risk = yes

				# Remove Conservative Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { con_opp_deputies = deputy_calculator }
						subtract_from_variable = { con_sup_deputies = deputy_calculator }
						clamp_variable = {
							var = con_opp_deputies
							min = 0
							max = con_deputies
						}
						clamp_variable = {
							var = con_sup_deputies
							min = 0
							max = con_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Remove Turkish Nationalist Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { nat_tur_opp_deputies = deputy_calculator }
						subtract_from_variable = { nat_tur_sup_deputies = deputy_calculator }
						clamp_variable = {
							var = nat_tur_opp_deputies
							min = 0
							max = nat_tur_deputies
						}
						clamp_variable = {
							var = nat_tur_sup_deputies
							min = 0
							max = nat_tur_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Remove Independent Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.PREV.PREV.PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { ind_opp_deputies = deputy_calculator }
						subtract_from_variable = { ind_sup_deputies = deputy_calculator }
						clamp_variable = {
							var = ind_opp_deputies
							min = 0
							max = ind_deputies
						}
						clamp_variable = {
							var = ind_sup_deputies
							min = 0
							max = ind_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Give reward
				ROOT = {
					set_variable = { pp_calculator = PREV.PREV.PREV.PREV.PREV.state_population }
					divide_variable = { pp_calculator = 100000 }
					round_variable = pp_calculator
					add_political_power = pp_calculator
				}
			}

			### Crush Corruption
			ARM_Crush_Corruption_button_click = {
				if = {
					limit = {
						check_variable = { corruption > 1 }
					}
					add_state_modifier = {
						modifier = {
							local_building_slots_factor = 0.20
							local_manpower = 0.50
						}
					}
				}
				else = {
					add_state_modifier = {
						modifier = {
							local_building_slots_factor = 0.10
							local_manpower = 0.25
						}
					}
				}
				clear_variable = corruption
				ROOT = { add_political_power = -50 }
			}

			### Focus Relief Efforts
			ARM_Focus_Relief_button_click = {
				# Decrease unrest level
				ARM_decrease_revolt_risk = yes

				# Add Conservative Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { con_sup_deputies = deputy_calculator }
						subtract_from_variable = { con_opp_deputies = deputy_calculator }
						clamp_variable = {
							var = con_opp_deputies
							min = 0
							max = con_deputies
						}
						clamp_variable = {
							var = con_sup_deputies
							min = 0
							max = con_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Add Turkish Nationalist Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { nat_tur_sup_deputies = deputy_calculator }
						subtract_from_variable = { nat_tur_opp_deputies = deputy_calculator }
						clamp_variable = {
							var = nat_tur_opp_deputies
							min = 0
							max = nat_tur_deputies
						}
						clamp_variable = {
							var = nat_tur_sup_deputies
							min = 0
							max = nat_tur_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Add Arab Nationalist Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.PREV.PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { nat_ara_sup_deputies = deputy_calculator }
						subtract_from_variable = { nat_ara_opp_deputies = deputy_calculator }
						clamp_variable = {
							var = nat_ara_opp_deputies
							min = 0
							max = nat_ara_deputies
						}
						clamp_variable = {
							var = nat_ara_sup_deputies
							min = 0
							max = nat_ara_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}

				# Add Independent Deputies
				if = {
					limit = {
						OR = {
							state = 350 #Diyarbakir
							state = 354 #Erzurum
							state = 352 #Van
							state = 455 #Ma'an
						}
					}
					ROOT = {
						# Calculate amount of added deputies
						set_variable = { deputy_calculator = PREV.PREV.PREV.PREV.state_population }
						divide_variable = { deputy_calculator = 100000 }
						round_variable = deputy_calculator

						# Add the deputies
						add_to_variable = { ind_sup_deputies = deputy_calculator }
						subtract_from_variable = { ind_opp_deputies = deputy_calculator }
						clamp_variable = {
							var = ind_opp_deputies
							min = 0
							max = ind_deputies
						}
						clamp_variable = {
							var = ind_sup_deputies
							min = 0
							max = ind_deputies
						}

						# Calculate coalition strength
						ARM_calc_coalition_strength = yes
					}
				}	
				ROOT = {
					add_political_power = -15
				}
			}

			### Centralise
			ARM_Action_Centralise_button_click = {
				ARM_increase_revolt_risk = yes
				ARM_increase_authority_autonomous_region = yes
				ROOT = {
					add_political_power = -10
				}
			}
			ARM_Action_Decentralise_button_click = {
				ARM_decrease_revolt_risk = yes
				ARM_decrease_authority_autonomous_region = yes
			}
		}

		triggers = {
			###########
			# GENERAL #
			###########
			ARM_Nationalist_icon_visible = {
				NOT = { has_state_flag = ARM_armenianist }
			}
			ARM_Nationalist_Focus_visible = {
				NOT = { has_state_flag = ARM_armenianist }
			}
			ARM_armenianist_icon_visible = {
				has_state_flag = ARM_armenianist
			}
			ARM_armenianist_Focus_visible = {
				has_state_flag = ARM_armenianist
			}
			################
			# INTERACTIONS #
			################
			ARM_Action_Declare_Martial_Law_button_visible = {
				ROOT = { has_government = totalitarianism }
			}
			ARM_Action_Declare_Martial_Law_button_click_enabled = {
				has_state_flag = ARM_Can_Martial_Law
			}
			ARM_Action_Calm_Down_Local_Leaders_button_click_enabled = {
				has_state_flag = ARM_Can_Bribe
				ARM_revolt_risk_very_low = yes
				ROOT = { has_political_power > 19.99 }
			}
			ARM_Action_Calm_Down_Local_Leaders_button_visible = {
				ROOT = {
					OR = {
						has_government = totalitarianism
						has_government = nationalism
						has_country_flag = centralist_DF
					}
				}
			}
			ARM_Action_Recruit_Local_Troops_button_click_enabled = {
				ROOT = {
					has_war = yes
					has_army_experience > 29.99
				}
				NOT = {
					has_state_flag = recruited_irregulars
				}
			}
			ARM_Loosen_Tax_Burden_button_visible = {
				ARM_is_autonomous_region = no
				ROOT = {
					OR = {
						has_government = social_liberal
						has_government = market_liberal
					}
					NOT = {
						has_country_flag = centralist_DF
					}
				}
			}
			ARM_Loosen_Tax_Burden_button_click_enabled = {
				check_variable = {
					corruption < 2
				}
				ROOT = {
					has_political_power > 9.99
				}
			}
			ARM_Increase_Tax_Burden_button_visible = {
				ARM_is_autonomous_region = no
				ROOT = {
					OR = {
						has_government = social_liberal
						has_government = market_liberal
					}
					NOT = {
						has_country_flag = centralist_DF
					}
				}
			}
			ARM_Increase_Tax_Burden_button_click_enabled = {
				ARM_revolt_risk_very_high = no
			}
			ARM_Crush_Corruption_button_visible = {
				ARM_is_autonomous_region = no
				ROOT = {
					OR = {
						has_government = social_liberal
						has_government = market_liberal
					}
					NOT = {
						has_country_flag = centralist_DF
					}
				}
			}
			ARM_Crush_Corruption_button_click_enabled = {
				has_variable = corruption
				ROOT = { has_political_power > 49.99 }
			}
			ARM_Focus_Relief_button_click_enabled = {
				ARM_revolt_risk_very_low = yes
				ROOT = { has_political_power > 14.99 }
			}
			ARM_Focus_Relief_button_visible = {
				ROOT = {
					OR = {
						has_government = social_liberal
						has_government = market_liberal
					}	
					NOT = {
						has_country_flag = centralist_DF
					}
				}
			}
			ARM_Action_Purge_Disloyal_Elements_button_visible = {
				ROOT = { has_government = nationalism }
			}
			ARM_Action_Purge_Disloyal_Elements_button_click_enabled = {
				ARM_revolt_risk_very_low = yes
				ROOT = { command_power > 25 }
			}
			##################
			# (DE)CENTRALISE #
			##################
			ARM_Action_Centralise_button_visible = {
				NOT = { state = 773 } #Constantinople
			}
			ARM_Action_Centralise_button_click_enabled = {
				ROOT = {
					has_political_power > 9.99
					OR = {
						has_government = totalitarianism
						has_country_flag = centralist_DF
					}	
				}
				ARM_can_centralise = yes
			}
			ARM_Action_Decentralise_button_visible = {
				NOT = { state = 773 } #Constantinople
			}
			ARM_Action_Decentralise_button_click_enabled = {
				ARM_is_autonomous_region = no
			}
		}

		properties = {
			ARM_Authority = {
				frame = ARM_authority_level
			}
		}

		ai_enabled = {
            tag = ARM
        }
        
        ai_test_interval = 168
        ai_test_scopes = test_self_owned_states
        
        ai_check_scope = {
            is_core_of = ARM
        }
        
        ai_max_weight_taken_per_test = 5
        
        ai_weights = {
            ARM_Action_Centralise_button_click = {
                ai_will_do = {
                    base = 100
                }
			}
			ARM_Action_Calm_Down_Local_Leaders_button_click = {
                ai_will_do = {
                    base = 0
                    modifier = {
                        add = 20
						ARM_revolt_risk_medium = yes
						ROOT = { has_political_power > 50 }
					}
					modifier = {
                        add = 100
						ARM_revolt_risk_medium = yes
                        OR = {
							NOT = { country_exists = EGY }
							EGY = { is_subject = yes }
						}
                    }
                }
			}
			ARM_Focus_Relief_button_click = {
				ai_will_do = {
                    base = 0
                    modifier = {
                        add = 20
						ARM_revolt_risk_medium = yes
						ROOT = { has_political_power > 50 }
					}
					modifier = {
                        add = 100
						ARM_revolt_risk_medium = yes
                        OR = {
							NOT = { country_exists = EGY }
							EGY = { is_subject = yes }
						}
                    }
                }
			}
			ARM_Action_Recruit_Local_Troops_button_click = {
				ai_will_do = {
                    base = 0                    
                    modifier = {
                        add = 100	
						ARM = {
							has_war_with = EGY
							has_war_with = PER
							NOT = {
								controls_state = 554
								controls_state = 291
								controls_state = 812
							}
						}
					}
                }
			}
        }
	}

	ARM_congress_decision_ui = {
		context_type = decision_category
		window_name = "ARM_congress_decision_ui_window"

		properties = {
			senate_icon = {
				frame = current_senate_icon_frame
			}

			house_icon = {
				frame = current_house_icon_frame
			}
		}

		triggers = {
			box_ideology_soc_lib_visible = {
				has_government = social_liberal
			}
			box_ideology_soc_con_visible = {
				has_government = traditional_conservatism
			}
			box_ideology_mar_lib_visible = {
				has_government = market_liberal
			}
		}
	}

	ARM_syria_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_syria_tooltip_button"
	}
	ARM_greek_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_greek_tooltip_button"
	}
	ARM_arab_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_arab_tooltip_button"
	}
	ARM_kurd_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_kurd_tooltip_button"
	}
	ARM_iraq_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_iraq_tooltip_button"
	}
	ARM_libya_tooltip_ui = {
		context_type = decision_category
		window_name = "ARM_libya_tooltip_button"
	}
}

